<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>カーリース×地方活性化 簡易試算ツール</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="slider.css">
</head>
<body>
  <header>
    <h1>カーリース × 地方活性化 試算シミュレーター</h1>
    <p>スライダーを動かして、事業収益と協賛誘因の変化を確認</p>
  </header>

  <main>
    <section class="panel">
      <h2>主要パラメータ</h2>
      <div class="grid">

        <label>
          <span>リース単価（円／月）</span>
          <input type="range" id="pL" min="5000" max="40000" step="1000" value="18000">
          <output id="pL_out">18000</output>
        </label>

        <label>
          <span>リース利用者数（人）</span>
          <input type="range" id="NU" min="10" max="1000" step="10" value="200">
          <output id="NU_out">200</output>
        </label>

        <label>
          <span>協賛単価（円／社）</span>
          <input type="range" id="pS" min="50000" max="2000000" step="50000" value="300000">
          <output id="pS_out">300000</output>
        </label>

        <label>
          <span>協賛団体数（社）</span>
          <input type="range" id="NS" min="0" max="50" step="1" value="10">
          <output id="NS_out">10</output>
        </label>

      </div>
    </section>

    <section class="panel">
      <h2>固定値（手動入力）</h2>
      <div class="grid small">
        <label>
          <span>車両調達・保有コスト（円／台・月）</span>
          <input type="number" id="cV" value="35000">
        </label>

        <label>
          <span>車両台数</span>
          <input type="number" id="NV" value="30">
        </label>

        <label>
          <span>雑費（アプリ運用・事務等, 円／月）</span>
          <input type="number" id="Z" value="1000000">
        </label>

        <label>
          <span>経済効果（協賛企業1社あたり, 円）</span>
          <input type="number" id="E" value="1200000">
        </label>
      </div>
    </section>

    <section class="panel result">
      <h2>計算結果</h2>
      <div class="result-grid">
        <div>
          <h3>事業収益（円／月）</h3>
          <div class="value" id="profit_view">—</div>
        </div>
        <div>
          <h3>協賛企業の誘因（円／社）</h3>
          <div class="value" id="incentive_view">—</div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>© 簡易試算モデル for Seminar Discussion</p>
  </footer>

  <script>
    const fmt = (n)=>n.toLocaleString('ja-JP');
    const get=(id)=>document.getElementById(id);

    const vars=['pL','NU','pS','NS','cV','NV','Z','E'];

    const calc=()=>{
      const v={};
      vars.forEach(k=>v[k]=Number(get(k).value));

      // 収益 = (pS×NS + pL×NU) − (cV×NV + Z)
      const revenue=(v.pS*v.NS)+(v.pL*v.NU);
      const cost=(v.cV*v.NV)+v.Z;
      const profit=revenue-cost;

      // 協賛誘因 = E − pS
      const incentive=v.E - v.pS;

      get('profit_view').textContent=fmt(Math.round(profit));
      get('incentive_view').textContent=fmt(Math.round(incentive));

      // 色分け
      get('profit_view').style.color=profit>=0?'#4caf50':'#f44336';
      get('incentive_view').style.color=incentive>=0?'#4caf50':'#f44336';
    };

    // スライダーの動的更新
    ['pL','NU','pS','NS'].forEach(id=>{
      const el=get(id);
      const out=get(id+'_out');
      el.addEventListener('input',()=>{
        out.textContent=fmt(el.value);
        calc();
      });
    });

    ['cV','NV','Z','E'].forEach(id=>{
      get(id).addEventListener('input',calc);
    });

    document.addEventListener('DOMContentLoaded',calc);
  </script>
</body>
</html>
