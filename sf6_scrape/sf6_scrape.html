<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Street Fighter 6 ãƒã‚¹ã‚¿ãƒ¼ãƒ©ãƒ³ã‚¯ãƒ©ãƒ³ã‚­ãƒ³ã‚° ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ä»•çµ„ã¿</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.6;
      margin: 2rem;
      max-width: 980px;
    }
    h1, h2, h3 {
      border-left: 4px solid #333;
      padding-left: 0.5rem;
    }
    pre {
      background: #f5f5f5;
      padding: 0.75rem 1rem;
      overflow-x: auto;
      font-size: 0.9rem;
    }
    code {
      font-family: Consolas, Menlo, Monaco, monospace;
    }
    ul {
      padding-left: 1.5rem;
    }
    .note {
      font-size: 0.9rem;
      color: #555;
    }
    .small {
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<h1>Street Fighter 6 ãƒã‚¹ã‚¿ãƒ¼ãƒ©ãƒ³ã‚¯ãƒ©ãƒ³ã‚­ãƒ³ã‚° ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ä»•çµ„ã¿</h1>

<p>
  ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€Street Fighter 6 å…¬å¼ã‚µã‚¤ãƒˆ BUCKLER ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹
  <strong>ãƒã‚¹ã‚¿ãƒ¼ãƒ©ãƒ³ã‚¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°</strong>ã‚’å¯¾è±¡ã«ã€Python ã¨ Selenium ã‚’ç”¨ã„ã¦
  ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã€åˆ†æç”¨ã® CSV ãƒ‡ãƒ¼ã‚¿ã«ã¾ã¨ã‚ã‚‹ä»•çµ„ã¿ã‚’èª¬æ˜ã—ã¾ã™ã€‚
</p>

<p class="note">
  â€» å€‹äººã®å­¦ç¿’ãƒ»ç ”ç©¶ç›®çš„ã§ã®åˆ©ç”¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚<br />
  â€» å…¬å¼ã‚µã‚¤ãƒˆã®åˆ©ç”¨è¦ç´„ã‚„ã‚µãƒ¼ãƒãƒ¼è² è·ã«ã¯ååˆ†é…æ…®ã—ã€éåº¦ãªã‚¢ã‚¯ã‚»ã‚¹ã¯è¡Œã‚ãªã„è¨­è¨ˆã¨ã—ã¦ã„ã¾ã™ã€‚
</p>

<hr />

<h2>1. ç›®çš„ã¨å…¨ä½“åƒ</h2>

<ul>
  <li>BUCKLER ãƒã‚¹ã‚¿ãƒ¼ãƒ©ãƒ³ã‚¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‹ã‚‰ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ï¼š</li>
  <ul>
    <li>é †ä½</li>
    <li>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å</li>
    <li>ä½¿ç”¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</li>
    <li>MRï¼ˆMaster Ratingï¼‰</li>
    <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« URL ã‹ã‚‰æŠ½å‡ºï¼‰</li>
  </ul>
  <li>å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ CSV åŒ–ã—ã€Python / pandas ã‚’ç”¨ã„ãŸåˆ†æã«åˆ©ç”¨ã™ã‚‹ã€‚</li>
  <li>MR å¸¯ã”ã¨ã®åˆ†å¸ƒã€ã‚­ãƒ£ãƒ©ä½¿ç”¨ç‡ã€ç‰¹å®šã‚­ãƒ£ãƒ©ï¼ˆä¾‹ï¼šã‚µã‚¬ãƒƒãƒˆï¼‰ã®å¸¯åˆ¥äººæ•°ãªã©ã‚’å¯è¦–åŒ–ã™ã‚‹åŸºç›¤ã‚’ä½œã‚‹ã€‚</li>
</ul>

<p>å®Ÿè£…ã¯æ¬¡ã® 4 ã‚¹ãƒ†ãƒƒãƒ—ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<ol>
  <li>ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ Cookie ã‚’ä¿å­˜</li>
  <li>ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç·ãƒšãƒ¼ã‚¸æ•°ã‚’å–å¾—ã—ã€MR å¸¯ã”ã¨ã«ãƒšãƒ¼ã‚¸ç¯„å›²ã‚’æ¨å®š</li>
  <li>å…¨ä½“ or ã‚­ãƒ£ãƒ©åˆ¥ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒšãƒ¼ã‚¸æ•°æŒ‡å®šã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°</li>
  <li>ç‰¹å®šã‚­ãƒ£ãƒ©ãƒ»ç‰¹å®šãƒšãƒ¼ã‚¸ç¯„å›²ã®è©³ç´°å–å¾—</li>
</ol>

<hr />

<h2>2. ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã® Cookie ä¿å­˜</h2>

<p>
  BUCKLER ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰æã¨ã—ã¦ã„ã‚‹ãŸã‚ã€
  ã¾ãšã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§æ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ãã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ï¼ˆCookieï¼‰ã‚’ä¿å­˜ã—ã¾ã™ã€‚
</p>

<pre><code>from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
import json
import time

# 1. æ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³ç”¨ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•
options = webdriver.ChromeOptions()
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()),
                          options=options)

# 2. BUCKLER ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦æ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³
driver.get("https://www.streetfighter.com/6/buckler/ja-jp/ranking/master")
print("ğŸ”‘ ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ï¼ˆ30ç§’å¾…æ©Ÿï¼‰")
time.sleep(30)

# 3. Cookie ã‚’ä¿å­˜
cookies = driver.get_cookies()
with open("cookies.json", "w", encoding="utf-8") as f:
    json.dump(cookies, f, indent=2, ensure_ascii=False)

driver.quit()
</code></pre>

<p class="small">
  ä¸€åº¦ <code>cookies.json</code> ã‚’ä½œæˆã™ã‚Œã°ã€ä»¥é™ã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§ã¯è‡ªå‹•çš„ã« Cookie ã‚’èª­ã¿è¾¼ã‚“ã§ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’å†ç¾ã—ã¾ã™ã€‚
</p>

<hr />

<h2>3. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç·ãƒšãƒ¼ã‚¸æ•°ã¨ MR å¸¯ã®ãƒšãƒ¼ã‚¸æ¨å®š</h2>

<h3>3-1. ç·ãƒšãƒ¼ã‚¸æ•°ã®å–å¾—</h3>

<p>
  ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ç·ãƒšãƒ¼ã‚¸æ•°ã‚’å–å¾—ã—ã€å¾Œã®å‡¦ç†ã§ã€Œã©ã“ã¾ã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã™ã‚‹ã‹ã€ã‚’æ±ºã‚ã‚‹ãƒ™ãƒ¼ã‚¹ã«ã—ã¾ã™ã€‚
</p>

<pre><code>from selenium.webdriver.common.by import By
import re
import time

driver.get("https://www.streetfighter.com/6/buckler/ja-jp/ranking/master")
time.sleep(3)

try:
    last_page_element = driver.find_element(By.CLASS_NAME,
                                            "ranking_ranking_now__last__oqSXS")
    last_page_text = last_page_element.text.strip()
    match = re.search(r"\d+", last_page_text)
    if match:
        total_pages = int(match.group())
        print(f"ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ç·ãƒšãƒ¼ã‚¸æ•°: {total_pages}")
    else:
        print("ãƒšãƒ¼ã‚¸ç•ªå·ã®æŠ½å‡ºã«å¤±æ•—ã—ã¾ã—ãŸ")
except Exception as e:
    print(f"æœ€çµ‚ãƒšãƒ¼ã‚¸è¦ç´ ã®å–å¾—ã«å¤±æ•—: {e}")
</code></pre>

<h3>3-2. MR å¸¯ã”ã¨ã®ãƒšãƒ¼ã‚¸ç¯„å›²æ¨å®š</h3>

<p>
  äº‹å‰ã«é›†è¨ˆã—ãŸ <strong>MR å¸¯ã”ã¨ã®å‰²åˆ</strong> ã‚’ä½¿ã„ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä¸Šã§ãŠãŠã‚ˆãã©ã®ãƒšãƒ¼ã‚¸ãŒã©ã® MR å¸¯ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ã‚’æ¨å®šã—ã¾ã™ã€‚
</p>

<pre><code>mr_distribution = {
    "~999": 0.1321,
    "1000~1099": 0.1318,
    "1100~1199": 0.1307,
    "1200~1299": 0.1271,
    "1300~1399": 0.1180,
    "1400~1499": 0.1007,
    "1501~1599": 0.0661,  # MR1500 é™¤å¤–æ¸ˆã¿
    "1600~1699": 0.0328,
    "1700~1799": 0.0171,
    "1800~1899": 0.0085,
    "1900~1999": 0.0040,
    "2000~2099": 0.0020,
    "2100~2199": 0.0008,
    "2200~2299": 0.0004,
    "2300~2399": 0.00008,
    "2400~2499": 0.00002,
}

estimated_ranges = {}
current_start = 1

for mr_range, ratio in sorted(mr_distribution.items(),
                              key=lambda x: -int(re.search(r'\d+', x[0]).group())):
    pages = int(round(total_pages * ratio))
    start_page = current_start
    end_page = current_start + pages - 1
    estimated_ranges[mr_range] = {
        "ãƒšãƒ¼ã‚¸æ•°": pages,
        "é–‹å§‹ãƒšãƒ¼ã‚¸": start_page,
        "çµ‚äº†ãƒšãƒ¼ã‚¸": end_page
    }
    current_start += pages

print("MR å¸¯ã”ã¨ã®ãƒšãƒ¼ã‚¸ç¯„å›²ï¼ˆä¾‹ï¼‰:")
for mr, info in estimated_ranges.items():
    print(f"MR {mr}: {info['ãƒšãƒ¼ã‚¸æ•°']} ãƒšãƒ¼ã‚¸ï¼ˆ{info['é–‹å§‹ãƒšãƒ¼ã‚¸']}ã€œ{info['çµ‚äº†ãƒšãƒ¼ã‚¸']}ï¼‰")
</code></pre>

<p class="small">
  ã“ã‚Œã«ã‚ˆã‚Šã€ä¾‹ãˆã°ã€ŒMR 2000ã€œ2099 å¸¯ã ã‘æ¬²ã—ã„ã®ã§ã€ãã®å‘¨è¾ºãƒšãƒ¼ã‚¸ã‚’é‡ç‚¹çš„ã«å–å¾—ã™ã‚‹ã€ã¨ã„ã£ãŸã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
</p>

<hr />

<h2>4. å…¨ä½“ or ã‚­ãƒ£ãƒ©åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®å–å¾—ï¼ˆãƒšãƒ¼ã‚¸æ•°æŒ‡å®šï¼‰</h2>

<p>
  ã“ã“ã‹ã‚‰ãŒæœ¬æ ¼çš„ãªã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‡¦ç†ã§ã™ã€‚  
  ã¾ãšã¯ã€Œå…ˆé ­ã‹ã‚‰ n ãƒšãƒ¼ã‚¸åˆ†ã ã‘ã€å–å¾—ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªç‰ˆã§ã™ã€‚
</p>

<h3>4-1. ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æŒ‡å®šãƒ­ã‚¸ãƒƒã‚¯</h3>

<pre><code>character_name = None  # None ã®å ´åˆã¯å…¨ã‚­ãƒ£ãƒ©
character_id_map = {
    "ãƒªãƒ¥ã‚¦": "ryu",
    "ã‚±ãƒ³": "ken",
    "ãƒ«ãƒ¼ã‚¯": "luke",
    "æ˜¥éº—": "chunli",
    "ã‚¸ã‚§ã‚¤ãƒŸãƒ¼": "jamie",
    "ãƒãƒãƒ³": "manon",
    "ã‚­ãƒ³ãƒãƒªãƒ¼": "kimberly",
    "ã‚¸ãƒ¥ãƒª": "juri",
    "JP": "jp",
    "ãƒãƒªãƒ¼ã‚¶": "marisa",
    "ã‚­ãƒ£ãƒŸã‚£": "cammy",
    "ãƒ‡ã‚£ãƒ¼ã‚¸ã‚§ã‚¤": "deejay",
    "ã‚¶ãƒ³ã‚®ã‚¨ãƒ•": "zangief",
    "ã‚¬ã‚¤ãƒ«": "guile",
    "ãƒ–ãƒ©ãƒ³ã‚«": "blanka",
    "ã‚¨ãƒ‰ãƒ¢ãƒ³ãƒ‰æœ¬ç”°": "ehonda",
    "ãƒ€ãƒ«ã‚·ãƒ ": "dhalsim",
    "ãƒªãƒªãƒ¼": "lily",
    "ãƒ©ã‚·ãƒ¼ãƒ‰": "rashid",
    "A.K.I.": "aki",
    "ã‚¨ãƒ‰": "ed",
    "è±ªé¬¼": "akuma",
    "ãƒ™ã‚¬": "vega",
    "èˆ": "mai",
    "ãƒ†ãƒªãƒ¼": "terry",
    "ã‚¨ãƒ¬ãƒŠ": "elena",
    "ã‚µã‚¬ãƒƒãƒˆ": "sagat"
}
character_id = character_id_map.get(character_name) if character_name else None
</code></pre>

<h3>4-2. Cookie èª­ã¿è¾¼ã¿ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚° URL ç”Ÿæˆ</h3>

<pre><code>from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
import json
import time

options = webdriver.ChromeOptions()
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()),
                          options=options)

# å…ˆã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‹ã‚‰ Cookie ã‚’æŠ•å…¥
driver.get("https://www.streetfighter.com/")
time.sleep(2)

with open("cookies.json", "r", encoding="utf-8") as f:
    cookies = json.load(f)

for cookie in cookies:
    if "sameSite" in cookie:
        del cookie["sameSite"]
    driver.add_cookie(cookie)

base_url = "https://www.streetfighter.com/6/buckler/ja-jp/ranking/master"
if character_id:
    url = f"{base_url}?character_filter=4&character_id={character_id}&page=1&season_type=1"
else:
    url = f"{base_url}?page=1&season_type=1"

driver.get(url)
time.sleep(5)
</code></pre>

<h3>4-3. 1ãƒšãƒ¼ã‚¸ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿æŠ½å‡º</h3>

<pre><code>from selenium.webdriver.common.by import By
import re
import pandas as pd

data = []
current_page = 0
max_pages = 1  # å–å¾—ã—ãŸã„ãƒšãƒ¼ã‚¸æ•°ï¼ˆä¾‹ã§ã¯ 1ï¼‰

while current_page &lt; max_pages:
    # ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦é…å»¶èª­ã¿è¾¼ã¿å¯¾ç­–
    for _ in range(3):
        driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
        time.sleep(1)

    names = driver.find_elements(By.CLASS_NAME, "ranking_name__El29_")
    ratings = driver.find_elements(By.CLASS_NAME, "ranking_time__teMP4")
    characters = driver.find_elements(By.CSS_SELECTOR, "div.ranking_character__WoGAX img[alt]")
    profile_links = driver.find_elements(By.CSS_SELECTOR, 'a[href*="/profile/"]')

    ids_only = [re.search(r'/profile/(\\d+)', link.get_attribute("href")).group(1)
                for link in profile_links if re.search(r'/profile/(\\d+)', link.get_attribute("href"))]
    ids_only = ids_only[3:]  # å…ˆé ­ã®ä¸è¦ãªãƒªãƒ³ã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—

    idx = 0
    for i in range(len(names)):
        try:
            name = names[i].text.strip()
            if name == "EROICA_2040c":
                continue  # ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é™¤å¤–ã™ã‚‹ä¾‹

            rating_text = ratings[i].text
            rank_match = re.search(r"(\\d+)ä½", rating_text)
            mr_match = re.search(r"(\\d+)MR", rating_text)
            character = characters[i].get_attribute("alt").strip()

            user_id = ids_only[idx] if idx &lt; len(ids_only) else None
            idx += 1

            data.append({
                "é †ä½": int(rank_match.group(1)) if rank_match else None,
                "åå‰": name,
                "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼": character,
                "MR": int(mr_match.group(1)) if mr_match else None,
                "ãƒ¦ãƒ¼ã‚¶ãƒ¼ID": user_id
            })
        except Exception as e:
            print(f"ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¨ãƒ©ãƒ¼(index={i}): {e}")
            continue

    current_page += 1
    # ã“ã“ã§ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒšãƒ¼ã‚¸é€ã‚Šï¼ˆçœç•¥ï¼‰
</code></pre>

<p class="small">
  æœ€å¾Œã« <code>pandas.DataFrame</code> ã«å¤‰æ›ã—ã€ã‚­ãƒ£ãƒ©åˆ¥ãªã©ã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’åˆ†ã‘ã¦ CSV ã«å‡ºåŠ›ã—ã¾ã™ã€‚
</p>

<hr />

<h2>5. ç‰¹å®šã‚­ãƒ£ãƒ©ãƒ»ç‰¹å®šãƒšãƒ¼ã‚¸ç¯„å›²ã®å–å¾—ï¼ˆã‚µã‚¬ãƒƒãƒˆä¾‹ï¼‰</h2>

<p>
  ã‚ˆã‚Šç´°ã‹ãã€ã€Œã‚µã‚¬ãƒƒãƒˆã® 1ã€œ15 ãƒšãƒ¼ã‚¸ã ã‘ã€ã‚’å–ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚
  ãƒšãƒ¼ã‚¸ç•ªå·ã‚‚ä¸€ç·’ã«è¨˜éŒ²ã—ã€å¾Œã§ã€Œã©ã®ãƒšãƒ¼ã‚¸å¸¯ã®ã‚µã‚¬ãƒƒãƒˆã‹ã€ã‚’åˆ†æã—ã‚„ã™ãã—ã¦ã„ã¾ã™ã€‚
</p>

<pre><code>character_name = 'ã‚µã‚¬ãƒƒãƒˆ'
character_id = character_id_map.get(character_name)

start_page = 1
end_page = 15  # 0 ã‚’æŒ‡å®šã™ã‚‹ã¨æœ€çµ‚ãƒšãƒ¼ã‚¸ã¾ã§

# ...ï¼ˆCookie èª­ã¿è¾¼ã¿ã¯åŒæ§˜ï¼‰

base_url = "https://www.streetfighter.com/6/buckler/ja-jp/ranking/master"
url = f"{base_url}?character_filter=4&character_id={character_id}&page=1&season_type=1"
driver.get(url)
time.sleep(3)

def click_next():
    try:
        next_btn = WebDriverWait(driver, 8).until(
            EC.element_to_be_clickable((By.CLASS_NAME, "ranking_next05__bNXbW"))
        )
        driver.execute_script("arguments[0].scrollIntoView(true);", next_btn)
        time.sleep(0.4)
        next_btn.click()
        time.sleep(2)
        return True
    except Exception as e:
        print(f"æ¬¡ãƒšãƒ¼ã‚¸ãƒœã‚¿ãƒ³å¤±æ•—: {e}")
        return False

# start_page ã¾ã§ã‚¹ã‚­ãƒƒãƒ—
for _ in range(start_page - 1):
    if not click_next():
        break

data = []
current_page = start_page

def scrape_current_page(page_no: int):
    # åå‰æ¬„ãŒå‡ºã‚‹ã¾ã§å¾…æ©Ÿ
    WebDriverWait(driver, 10).until(
        EC.presence_of_all_elements_located((By.CLASS_NAME, "ranking_name__El29_"))
    )

    # ä»¥ä¸‹ã¯ 4-3 ã¨åŒæ§˜ã ãŒã€ã€Œãƒšãƒ¼ã‚¸ã€æƒ…å ±ã‚’è¿½åŠ 
    ...

    data.append({
        "é †ä½": ...,
        "åå‰": ...,
        "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼": ...,
        "MR": ...,
        "ãƒ¦ãƒ¼ã‚¶ãƒ¼ID": ...,
        "ãƒšãƒ¼ã‚¸": page_no
    })

# ãƒ«ãƒ¼ãƒ—ã§ãƒšãƒ¼ã‚¸ç¯„å›²ã‚’å–å¾—
while True:
    print(f"ãƒšãƒ¼ã‚¸ {current_page} å–å¾—ä¸­...")
    if not scrape_current_page(current_page):
        break
    if end_page != 0 and current_page >= end_page:
        break
    if not click_next():
        break
    current_page += 1

df = pd.DataFrame(data)
filename = "sf6_ranking_scraped_sagat_p1-15.csv"
df.to_csv(filename, index=False, encoding="utf-8-sig")
</code></pre>

<hr />

<h2>6. å‡ºåŠ›ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ä»Šå¾Œã®åˆ†æ</h2>

<p>æœ€çµ‚çš„ãª CSV ã¯ã€æ¬¡ã®ã‚ˆã†ãªåˆ—ã‚’æŒã¤ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™ã€‚</p>

<ul>
  <li><code>é †ä½</code></li>
  <li><code>åå‰</code></li>
  <li><code>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</code></li>
  <li><code>MR</code></li>
  <li><code>ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</code></li>
  <li><code>ãƒšãƒ¼ã‚¸</code>ï¼ˆãƒšãƒ¼ã‚¸ç¯„å›²ç‰ˆã®ã¿ï¼‰</li>
</ul>

<p>
  ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†ã“ã¨ã§ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªåˆ†æãŒå¯èƒ½ã«ãªã‚Šã¾ã™ï¼š
</p>

<ul>
  <li>ã‚­ãƒ£ãƒ©åˆ¥ã® MR ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãƒ»ç®±ã²ã’å›³</li>
  <li>MR å¸¯ã”ã¨ã®ã‚­ãƒ£ãƒ©ä½¿ç”¨ç‡</li>
  <li>ç‰¹å®šã‚­ãƒ£ãƒ©ï¼ˆä¾‹ï¼šã‚µã‚¬ãƒƒãƒˆï¼‰ã®ä¸­ä½å¸¯ãƒ»ä¸Šä½å¸¯äººæ•°ã®æ¯”è¼ƒ</li>
  <li>ã‚·ãƒ¼ã‚ºãƒ³ã”ã¨ã®ç’°å¢ƒå¤‰åŒ–ï¼ˆç¶™ç¶šçš„ã«å–å¾—ã—ãŸå ´åˆï¼‰</li>
</ul>

<p class="note">
  æœ¬ãƒšãƒ¼ã‚¸ã¯ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ã©ã®ã‚ˆã†ã«å–å¾—ã—ã¦ã„ã‚‹ã‹ã€ã‚’ç¤ºã™æŠ€è¡“è³‡æ–™ã§ã™ã€‚<br />
  å®Ÿéš›ã®ã‚°ãƒ©ãƒ•ã‚„è€ƒå¯Ÿã¯ã€ãƒ¡ã‚¤ãƒ³ã®ã€ŒStreet Fighter 6 ã®ãƒ‡ãƒ¼ã‚¿åˆ†æã€ãƒšãƒ¼ã‚¸å´ã§æç¤ºã—ã¾ã™ã€‚
</p>

</body>
</html>
